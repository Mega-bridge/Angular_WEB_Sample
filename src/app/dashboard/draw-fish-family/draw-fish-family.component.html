
<kendo-drawer-container>
    <kendo-drawer
        #drawer

        mode="overlay"
        [mini]="true"
        [(expanded)]="expanded"
        [autoCollapse]="false"
        [position]="position"
        [width]="600"
        [miniWidth]="55"

        [style]="{'transform': 'translate(0px, 61px)', 'border-left': '#cccccc solid 1px'}"
        class="drawer-style"
    >

<!--        <ng-template kendoDrawerHeaderTemplate>-->
<!--&lt;!&ndash;            <span *ngIf="!expanded" (click)="drawer.toggle()" style="font-size: 20px;align-items: center"><<</span>&ndash;&gt;-->
<!--            <span  *ngIf="expanded"  (click)="drawer.toggle()"> <b> >> </b> </span>-->
<!--            <span *ngIf="expanded" style="font-size: 20px;">결과지</span>-->
<!--        </ng-template>-->
<!--        <ng-template kendoDrawerItemTemplate let-item >-->

<!--            <span  *ngIf="!expanded" class="k-icon item-icon flag k-i-arrow-seek-left" (click)="drawer.toggle()"></span>-->
<!--&lt;!&ndash;            <span  *ngIf="expanded" class="k-icon item-icon flag k-i-arrow-seek-right" (click)="drawer.toggle()"></span>&ndash;&gt;-->
<!--&lt;!&ndash;            <span *ngIf="expanded" (click)="drawer.toggle()">결과지</span>&ndash;&gt;-->

<!--        </ng-template>-->
        <ng-template kendoDrawerFooterTemplate >
            <div *ngIf="!expanded"  (click)="drawer.toggle()" style="display: flex; justify-content: center;padding: 10px; cursor: pointer;">
                <span   style="font-size: 25px;"> <b> << </b> </span>
            </div>

            <div kendoTooltip *ngIf="expanded" style="padding: 10px; border-bottom: #cccccc solid 1px;">
                <span (click)="drawer.toggle()" style="font-size: 25px;cursor: pointer;" title="닫기"> <b> >> </b> </span>
                <span style="font-size: 25px;">결과지</span>
            </div>
            <div>
                <div *ngIf="expanded" style="padding: 10px;font-size: 20px;">
                    수고하셨습니다! <br>
                    어항 속 모습을 통해 해석된 당신의 심리는 아래와 같습니다.
                </div>
            </div>


        </ng-template>
    </kendo-drawer>
    <kendo-drawer-content>

        <div class="side">
            <div class="card-title">
                <span>회차</span>
                <span style="
                padding: 5px;
                border: #cccccc solid 1px;
                border-radius: 50%;
                width: 18px;
                height: 18px;
                text-align: center;
                line-height: 20px;
                cursor: pointer;"
                      (click)="addSeq()">+</span>
            </div>

            <div class="card-seq-wrap">
                <div class="card-seq"  *ngFor="let item of seqItems; let i = index" (click)="selectSeq(item, i)" [style.background-color] ="selectedSeq === item.seq ? '#cccccc' : ''">
                    <div>
                    <span class="title">{{item.text}}</span>
                    <span class="sub">{{item.date}}</span>
                    </div>
                    <div style="width: 18px;
                    height: 18px;
                    color: #ff0000;
                    border: #ff0000 solid 1px;
                    border-radius: 50%;
                    text-align: center;
                    cursor: pointer;"
                    (click)="deleteSeq(item, i)">
                        <span>-</span>
                    </div>

                </div>

            </div>

            <div class="card-title sub">
                <span>오브젝트 선택 순서</span>
            </div>
            <div class="card-seq-wrap" style="height: 44%; border: none;">
                <div style="overflow-y: scroll; padding: 10px 20px;">
                    <div *ngFor="let item of selectedObjectList; let i = index" style="padding: 5px 0;">
                        <span style="font-size: 12px;">{{i}}. {{item}}</span><br>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="canvas-wrap">
                {{hour}}시간 {{minute}}분 {{second}}초
                <div class="image-container"  [ngStyle] = "{'background-image': 'url('+canvasImage+')'}">
                    <!--                    <img [src]="this.canvasImage">-->
                </div>
                <div style="display: flex;flex-direction: row; justify-content: space-between;">
                    <div>

                        <button class="button-style" *ngIf="canvasImage==''" (click)="openFullscreen()">그리기 모드</button>

                    </div>

                    <div>
                        <button class="button-style btn2"(click)="canvasDownload()" >그림 다운로드</button>
                        <button class="button-style btn2 sm" (click)="drawer.toggle()">결과 보기</button>
                    </div>
                </div>
            </div>
        </div>
    </kendo-drawer-content>
</kendo-drawer-container>

<div  class="popup-background"  [hidden]="!isPopupOpen">
    <div   class="popup-background popup" >
        <div class="popup-canvas-wrap ">

            <!-- 어항 -->
            <kendo-popup [anchor]="anchor1"
                         [anchorAlign]="anchorAlign"


                         [animate]="animate"
                         *ngIf="showFishBowl">

                <div  class="pop-up-select-image">
                    <div *ngFor="let img of fishBowlImgList" class="img-wrap">
                        <img  (click)="selectWater(img)" [src]="img"  alt=""
                              [style.box-shadow]="selectedFishBowl === img ? '0 0 4px blue' : ''"/>
                    </div>
                </div>
            </kendo-popup>


            <!-- 일반 물고기 -->
            <kendo-popup [anchor]="anchor2"
                         [anchorAlign]="anchorAlign"
                         [popupAlign]="popupAlign"
                         [animate]="animate"
                         *ngIf="showFishes">

                <div  class="pop-up-select-image">
                    <div style="border-bottom: #cccccc dashed 1px; display: flex; ">
                        <div *ngFor="let faceImg of generalFaceImgList" class="img-wrap face">
                            <img  (click)="selectFishFace($event,faceImg,'GE')" [src]="faceImg"  alt=""
                                  [style.box-shadow]="selectedFishFace === faceImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>

                    <div style="display: flex; ">
                        <div *ngFor="let bodyImg of generalBodyImgList;let i = index"  class="img-wrap">
                            <img  (click)="selectFishBody($event,bodyImg)" [src]="bodyImg"  alt=""
                                  [style.box-shadow]="selectedFishBody === bodyImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>
                </div>
            </kendo-popup>


            <!-- 둥근 물고기 -->
            <kendo-popup [anchor]="anchor3"
                         [anchorAlign]="anchorAlign"
                         [popupAlign]="popupAlign"
                         [animate]="animate"
                         *ngIf="showRoundFishes">

                <div  class="pop-up-select-image">
                    <div style="border-bottom: #cccccc dashed 1px; display: flex; ">
                        <div *ngFor="let img of roundFaceImgList" class="img-wrap">
                            <img  (click)="selectFishFace($event,img,'RO')" [src]="img"  alt=""
                                  [style.box-shadow]="selectedFishFace === img ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>

                    <div style="display: flex; ">
                        <div *ngFor="let scalesImg of roundBodyImgList;let i = index"  class="img-wrap">
                            <img  (click)="selectFishBody($event,scalesImg)" [src]="scalesImg"  alt=""
                                  [style.box-shadow]="selectedFishBody === scalesImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>
                </div>
            </kendo-popup>


            <!-- 고래 -->
            <kendo-popup [anchor]="anchor4"
                         [anchorAlign]="anchorAlign"
                         [popupAlign]="popupAlign"
                         [animate]="animate"
                         *ngIf="showWhales">

                <div  class="pop-up-select-image">
                    <div style="border-bottom: #cccccc dashed 1px; display: flex; ">
                        <div *ngFor="let img of whaleFaceImgList" class="img-wrap">
                            <img  (click)="selectFishFace($event,img,'WH')" [src]="img"  alt="smile"
                                  [style.box-shadow]="selectedFishFace === img ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>

                    <div style="display: flex; ">
                        <div *ngFor="let scalesImg of whaleBodyImgList;let i = index"  class="img-wrap">
                            <img  (click)="selectFishBody($event,scalesImg)" [src]="scalesImg"  alt=""
                                  [style.box-shadow]="selectedFishBody === scalesImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>
                </div>
            </kendo-popup>

            <!-- 상어 -->
            <kendo-popup [anchor]="anchor5"
                         [anchorAlign]="anchorAlign"
                         [popupAlign]="popupAlign"
                         [animate]="animate"
                         *ngIf="showSharks">

                <div  class="pop-up-select-image">
                    <div style="border-bottom: #cccccc dashed 1px; display: flex; ">
                        <div *ngFor="let img of sharkFaceImgList" class="img-wrap">
                            <img  (click)="selectFishFace($event,img,'SH')" [src]="img"  alt="smile"
                                  [style.box-shadow]="selectedFishFace === img ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>


                    <div style="display: flex;">
                        <div *ngFor="let scalesImg of sharkBodyImgList;let i = index"  class="img-wrap">
                            <img  (click)="selectFishBody($event,scalesImg)" [src]="scalesImg"  alt=""
                                  [style.box-shadow]="selectedFishBody === scalesImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>
                </div>
            </kendo-popup>

            <!-- 장어 -->
            <kendo-popup [anchor]="anchor6"
                         [anchorAlign]="anchorAlign"
                         [popupAlign]="popupAlign"
                         [animate]="animate"
                         *ngIf="showEels">

                <div  class="pop-up-select-image">
                    <div style="border-bottom: #cccccc dashed 1px; display: flex; ">
                        <div *ngFor="let img of eelFaceImgList" class="img-wrap" >
                            <img  (click)="selectFishFace($event,img,'EE')" [src]="img"  alt="smile"
                                  [style.box-shadow]="selectedFishFace === img ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>

                    <div style="display: flex; ">
                        <div *ngFor="let scalesImg of eelBodyImgList;let i = index"  class="img-wrap">
                            <img  (click)="selectFishBody($event,scalesImg)" [src]="scalesImg"  alt=""
                                  [style.box-shadow]="selectedFishBody === scalesImg ? '0 0 4px blue' : ''"/>
                        </div>
                    </div>
                </div>
            </kendo-popup>


            <!-- 물고기 외 -->
            <kendo-popup [anchor]="anchor7"
                         [anchorAlign]="etcAnchorAlign"
                         [popupAlign]="etcPopupAlign"
                         [animate]="animate"
                         *ngIf="showEtc">

                <div  class="pop-up-select-image">
                    <div *ngFor="let img of etcImgList" class="img-wrap">
                        <img  (click)="selectEtcObject($event, img)" [src]="img"  alt="smile"
                              [style.box-shadow]="selectedEtc === img ? '0 0 4px blue' : ''"/>
                    </div>
                </div>
            </kendo-popup>


            <div class="img-card-wrap"   >

                <div class="img-card"  #anchor1>
                    <div class="img-card-header">
                        <img class="img-card-style"  src="{{fishBowlImgList[0]}}" (click)="closeOpenPopUp('showFishBowl')">
                    </div>
                </div>

                <div class="img-card">
                    <div class="img-card-header">가족 선택</div>
                    <div class="img-card-body">
                        <kendo-chiplist
                                selection="single"
                                (selectedChange)="selectFamilyType($event)"
                        >
                            <kendo-chip
                                    *ngFor="let family of familyTypeList;"
                                    [label]="family.description"
                                    [disabled]="isDisabled"
                                    [selected]="family.selected"
                            >
                            </kendo-chip>
                        </kendo-chiplist>
                    </div>
                </div>

                <div class="img-card" #anchor2>
                    <div class="img-card-header">
                        <img class="img-card-style" [ngStyle]="{'pointer-events': isFamilyAfterFish ? 'auto' : 'none'}" src="../assets/img/fish.svg" (click)="closeOpenPopUp('showFishes')">
                    </div>
                </div>

                <div class="img-card" #anchor3>
                    <div class="img-card-header">
                        <img class="img-card-style" [ngStyle]="{'pointer-events': isFamilyAfterFish ? 'auto' : 'none'}" src="../assets/img/roundFish.svg" (click)="closeOpenPopUp('showRoundFishes')">
                    </div>
                </div>

                <div class="img-card" #anchor4>
                    <div class="img-card-header">
                        <img class="img-card-style" [ngStyle]="{'pointer-events': isFamilyAfterFish ? 'auto' : 'none'}" src="../assets/img/whale.svg" (click)="closeOpenPopUp('showWhales')">
                    </div>
                </div>

                <div class="img-card" #anchor5>
                    <div class="img-card-header">
                        <img class="img-card-style" [ngStyle]="{'pointer-events': isFamilyAfterFish ? 'auto' : 'none'}" src="../assets/img/shark.svg" (click)="closeOpenPopUp('showSharks')">
                    </div>
                </div>

                <div class="img-card" #anchor6>
                    <div class="img-card-header">
                        <img class="img-card-style" [ngStyle]="{'pointer-events': isFamilyAfterFish ? 'auto' : 'none'}" src="../assets/img/eel.svg" (click)="closeOpenPopUp('showEels')">
                    </div>
                </div>

                <div class="img-card" #anchor7>
                    <div class="img-card-header">
                        <img class="img-card-style" src="{{etcImgList[0]}}" (click)="closeOpenPopUp('showEtc')">
                    </div>
                </div>
            </div>

            <div>
                <app-dashboard-drag-and-drop [userEmail]="userEmail" #canvas></app-dashboard-drag-and-drop>
            </div>
        </div>
        <div class="btn-wrap">
            <button class="button-style del" (click)="removeSelected();"> DELETE
            </button>
            <button class="button-style" (click)="rasterize()">SAVE</button>
        </div>
    </div>
</div>


<ng-container #dialog></ng-container>









